 # üîí –ê–Ω–∞–ª–∏–∑ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ MLM –ø—Ä–æ–µ–∫—Ç–∞

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 15 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–ü—Ä–æ–µ–∫—Ç:** Margine Space MLM Platform  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üî¥ **–í–´–°–û–ö–ê–Ø**

---

## üö® **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –£–Ø–ó–í–ò–ú–û–°–¢–ò**

### 1. **JWT_SECRET - –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –£–Ø–ó–í–ò–ú–û–°–¢–¨** üî¥
**–£—Ä–æ–≤–µ–Ω—å —É–≥—Ä–æ–∑—ã:** üî¥ **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```javascript
// backend/middleware/auth.js:2
const JWT_SECRET = process.env.JWT_SECRET || 'your-super-secret-jwt-key-change-this-in-production'
```

**–†–∏—Å–∫–∏:**
- ‚úÖ **JWT —Ç–æ–∫–µ–Ω—ã –º–æ–∂–Ω–æ –ø–æ–¥–¥–µ–ª–∞—Ç—å** –±–µ–∑ –∑–Ω–∞–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–∞
- ‚úÖ **–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω–∫–µ** –¥–ª—è –ª—é–±–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **–ü–æ–¥–¥–µ–ª–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö** –≤ —Ç–æ–∫–µ–Ω–∞—Ö
- ‚úÖ **–î–æ—Å—Ç—É–ø –∫ –ª—é–±—ã–º API endpoints**

**–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–∑–ª–æ–º–∞:**
```javascript
// –ê—Ç–∞–∫—É—é—â–∏–π –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –ª—é–±–æ–π JWT —Ç–æ–∫–µ–Ω:
const fakeToken = jwt.sign(
  { 
    id: 1, 
    email: 'admin@margine-space.com',
    isAdmin: true 
  }, 
  'your-super-secret-jwt-key-change-this-in-production'
);
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –°–æ–∑–¥–∞—Ç—å —Å–∏–ª—å–Ω—ã–π —Å–µ–∫—Ä–µ—Ç
JWT_SECRET=your-very-long-random-secret-key-here-minimum-32-characters

# 2. –î–æ–±–∞–≤–∏—Ç—å –≤ .env —Ñ–∞–π–ª
echo "JWT_SECRET=your-very-long-random-secret-key-here-minimum-32-characters" >> .env

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
pm2 restart mlm-backend
```

---

### 2. **–°–ª–∞–±—ã–µ –ø–∞—Ä–æ–ª–∏ –∞–¥–º–∏–Ω–æ–≤** üî¥
**–£—Ä–æ–≤–µ–Ω—å —É–≥—Ä–æ–∑—ã:** üî¥ **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```javascript
// backend/check-admin-users.js:25
const hashedPassword = await bcrypt.hash('admin123456', 10);

// backend/prisma/seed.js:65
password: 'admin123456'
password: 'superadmin123456'
```

**–†–∏—Å–∫–∏:**
- ‚úÖ **–ë—Ä—É—Ç—Ñ–æ—Ä—Å –∞—Ç–∞–∫–∏** –Ω–∞ –∞–¥–º–∏–Ω –∞–∫–∫–∞—É–Ω—Ç—ã
- ‚úÖ **–°–ª–æ–≤–∞—Ä–Ω—ã–µ –∞—Ç–∞–∫–∏** (–ø–∞—Ä–æ–ª–∏ –≤ —Å–ª–æ–≤–∞—Ä—è—Ö)
- ‚úÖ **–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å–∏—Å—Ç–µ–º–æ–π**

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –°–æ–∑–¥–∞—Ç—å —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏
ADMIN_PASSWORD=YourVeryStrongPassword123!@#
SUPERADMIN_PASSWORD=AnotherVeryStrongPassword456!@#

# 2. –û–±–Ω–æ–≤–∏—Ç—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
UPDATE users SET password = 'new_hashed_password' WHERE isAdmin = true;
```

---

### 3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ rate limiting** üü°
**–£—Ä–æ–≤–µ–Ω—å —É–≥—Ä–æ–∑—ã:** üü° **–°–†–ï–î–ù–ò–ô**

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- –í–æ–∑–º–æ–∂–Ω—ã DDoS –∞—Ç–∞–∫–∏
- –ë—Ä—É—Ç—Ñ–æ—Ä—Å –∞—Ç–∞–∫–∏ –Ω–∞ –ª–æ–≥–∏–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
import rateLimit from 'express-rate-limit';

const loginLimiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15 –º–∏–Ω—É—Ç
  max: 5, // –º–∞–∫—Å–∏–º—É–º 5 –ø–æ–ø—ã—Ç–æ–∫
  message: 'Too many login attempts, try again later'
});

app.post('/api/login', loginLimiter, async (req, res) => {
  // –ª–æ–≥–∏–Ω –ª–æ–≥–∏–∫–∞
});
```

---

### 4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ CORS –∑–∞—â–∏—Ç—ã** üü°
**–£—Ä–æ–≤–µ–Ω—å —É–≥—Ä–æ–∑—ã:** üü° **–°–†–ï–î–ù–ò–ô**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```javascript
// backend/index.js:167
const frontendUrl = process.env.FRONTEND_URL || 'http://localhost:5173';
```

**–†–∏—Å–∫–∏:**
- ‚úÖ **CSRF –∞—Ç–∞–∫–∏**
- ‚úÖ **–ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** —Å –¥—Ä—É–≥–∏—Ö –¥–æ–º–µ–Ω–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
app.use(cors({
  origin: ['https://margine-space.com', 'https://www.margine-space.com'],
  credentials: true
}));
```

---

### 5. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** üü°
**–£—Ä–æ–≤–µ–Ω—å —É–≥—Ä–æ–∑—ã:** üü° **–°–†–ï–î–ù–ò–ô**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```javascript
// –ú–Ω–æ–≥–æ –º–µ—Å—Ç –±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
const { amount } = req.body; // –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–∞
const { userId } = req.params; // –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏
```

**–†–∏—Å–∫–∏:**
- ‚úÖ **SQL Injection** (—Ö–æ—Ç—è Prisma –∑–∞—â–∏—â–∞–µ—Ç)
- ‚úÖ **NoSQL Injection**
- ‚úÖ **Buffer Overflow**

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
import Joi from 'joi';

const amountSchema = Joi.object({
  amount: Joi.number().positive().required(),
  userId: Joi.number().integer().positive().required()
});
```

---

## üõ°Ô∏è **–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò**

### **–ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–ö–†–ò–¢–ò–ß–ù–û):**

1. **–ò–∑–º–µ–Ω–∏—Ç—å JWT_SECRET:**
```bash
# –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π —Å–µ–∫—Ä–µ—Ç
openssl rand -base64 32

# –î–æ–±–∞–≤–∏—Ç—å –≤ .env
JWT_SECRET=–Ω–æ–≤—ã–π_—Å–µ–∫—Ä–µ—Ç_–∑–¥–µ—Å—å

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
pm2 restart mlm-backend
```

2. **–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –∞–¥–º–∏–Ω–æ–≤:**
```bash
# –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
UPDATE users SET password = '–Ω–æ–≤—ã–π_—Ö–µ—à_–ø–∞—Ä–æ–ª—è' WHERE isAdmin = true;
```

3. **–î–æ–±–∞–≤–∏—Ç—å rate limiting:**
```bash
npm install express-rate-limit
```

### **–°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:**

1. **–î–æ–±–∞–≤–∏—Ç—å 2FA –¥–ª—è –∞–¥–º–∏–Ω–æ–≤**
2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∞–¥–º–∏–Ω –¥–µ–π—Å—Ç–≤–∏–π**
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏**
4. **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**

### **–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:**

1. **–ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∫–∞–∂–¥—ã–µ 3 –º–µ—Å—è—Ü–∞**
2. **Penetration testing**
3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π**

---

## üìä **–û–¶–ï–ù–ö–ê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –£—Ä–æ–≤–µ–Ω—å –∑–∞—â–∏—Ç—ã | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ |
|-----------|----------------|--------------|
| JWT —Ç–æ–∫–µ–Ω—ã | üî¥ **–ö–†–ò–¢–ò–ß–ù–û** | –°–º–µ–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç |
| –ü–∞—Ä–æ–ª–∏ –∞–¥–º–∏–Ω–æ–≤ | üî¥ **–ö–†–ò–¢–ò–ß–ù–û** | –£—Å–∏–ª–∏—Ç—å –ø–∞—Ä–æ–ª–∏ |
| API endpoints | üü° **–°–†–ï–î–ù–ò–ô** | –î–æ–±–∞–≤–∏—Ç—å rate limiting |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | üü¢ **–•–û–†–û–®–û** | Prisma –∑–∞—â–∏—â–∞–µ—Ç |
| Email —Å–∏—Å—Ç–µ–º–∞ | üü° **–°–†–ï–î–ù–ò–ô** | –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SPF/DKIM |
| –§—Ä–æ–Ω—Ç–µ–Ω–¥ | üü° **–°–†–ï–î–ù–ò–ô** | –î–æ–±–∞–≤–∏—Ç—å CORS |

---

## üö® **–ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø**

### **1. –°–ï–ì–û–î–ù–Ø (–ö–†–ò–¢–ò–ß–ù–û):**
- [ ] –°–º–µ–Ω–∏—Ç—å JWT_SECRET
- [ ] –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –∞–¥–º–∏–Ω–æ–≤
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

### **2. –ù–ê –≠–¢–û–ô –ù–ï–î–ï–õ–ï:**
- [ ] –î–æ–±–∞–≤–∏—Ç—å rate limiting
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö

### **3. –í –¢–ï–ß–ï–ù–ò–ï –ú–ï–°–Ø–¶–ê:**
- [ ] 2FA –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

**‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï:** JWT_SECRET –∏ –ø–∞—Ä–æ–ª–∏ –∞–¥–º–∏–Ω–æ–≤ - —ç—Ç–æ **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï** —É—è–∑–≤–∏–º–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å **–ù–ï–ú–ï–î–õ–ï–ù–ù–û**!
