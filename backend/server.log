[QUEUE] Boss instance created, DB: postgresql://mlmuser:ItachiUchiha28%2F04@138.199.150.49:5432/mlmdb Schema: pgboss
[SCHEDULER] Starting scheduler with direct processing...
[SCHEDULER] Scheduler started successfully
ðŸš€ Starting system updater...
ðŸ”„ Performing system update at: 8/11/2025, 5:04:12 PM
Server running on port 3000
Queue system and scheduler started
âœ… Fetched 19279 pools from API
[processPositions] Returning: active=5, close=0, new=0
ðŸ’¾ Saved to database: 5 updated, 0 closed, 0 new
âœ… System update completed successfully
   Active positions: 5
   Closed positions: 0
   New positions: 0
[REGISTRATION] Email: test.link.verification@example.com | Verification Code: 325205 | Token: d23115bc275582562e92029a37fffbfa00c492e17cafb09d2a48967c38613d7c
[REGISTRATION] Verification email sent successfully to test.link.verification@example.com
[REGISTRATION] Email: ilchukmykola@gmail.com | Verification Code: 813903 | Token: 30f32edb7f8a1f146270b8a711fc45e18dfca20610e83ad1559d8c05fcc9e1a7
[REGISTRATION] Verification email sent successfully to ilchukmykola@gmail.com
Email token verification error: PrismaClientKnownRequestError: 
Invalid `prisma.user.create()` invocation:


Unique constraint failed on the fields: (`email`)
    at ri.handleRequestError (/Users/mac/Downloads/mlm-project-v-18-07_(8:08:25)/backend/node_modules/@prisma/client/runtime/library.js:121:7459)
    at ri.handleAndLogRequestError (/Users/mac/Downloads/mlm-project-v-18-07_(8:08:25)/backend/node_modules/@prisma/client/runtime/library.js:121:6784)
    at ri.request (/Users/mac/Downloads/mlm-project-v-18-07_(8:08:25)/backend/node_modules/@prisma/client/runtime/library.js:121:6491)
    at async l (/Users/mac/Downloads/mlm-project-v-18-07_(8:08:25)/backend/node_modules/@prisma/client/runtime/library.js:130:9812)
    at async file:///Users/mac/Downloads/mlm-project-v-18-07_(8:08:25)/backend/index.js:730:18 {
  code: 'P2002',
  meta: { modelName: 'User', target: [ 'email' ] },
  clientVersion: '6.11.1'
}
[RANK-REWARDS] userId: 16
[OptimizedRankRewardService] getUserTurnover userId: 16
[OptimizedRankRewardService] Calculating turnover...
[OptimizedRankRewardService] Calculated turnover: $0 in 553ms
[RANK-REWARDS] turnover: 0
[RANK-REWARDS] currentRank: { level: 0, name: 'No rank', turnover: 0 }
[RANK-REWARDS] nextRank: {
  level: 1,
  name: 'Bronze Club Card',
  turnover: 10000,
  reward: 300,
  prize: 'Bronze Club Card with your name'
}
[RANK-REWARDS] claimed: []
[RANK-REWARDS] userId: 16
[OptimizedRankRewardService] getUserTurnover userId: 16
[OptimizedRankRewardService] Using cached turnover: 0
[RANK-REWARDS] turnover: 0
[RANK-REWARDS] currentRank: { level: 0, name: 'No rank', turnover: 0 }
[RANK-REWARDS] nextRank: {
  level: 1,
  name: 'Bronze Club Card',
  turnover: 10000,
  reward: 300,
  prize: 'Bronze Club Card with your name'
}
[RANK-REWARDS] claimed: []
[DEFI POSITIONS GET] System mode - returning all positions: 21
[DEFI POSITIONS GET] System mode - returning all positions: 21
GET /api/profile/avatar called
User found: true Avatar: false
ðŸ›‘ Shutting down system updater...
ðŸ›‘ System updater stopped
SIGTERM received, shutting down gracefully...
[SCHEDULER] Scheduler stopped
